# PRD: 无尽画布AI交互原型 (Project: Synapse Canvas)

## 1. 核心愿景 (Core Vision)

创造一个非线性的、可视化的AI交互界面。用户的所有提问、AI的每次回应、以及基于回应的再探索，都以“节点”的形式呈现在一个可无限缩放、平移的画布上，完整地映射出整个思考与探索的全貌。它旨在将人与AI的交互从“一问一答”的执行模式，转变为“共同探索”的协作模式。

## 2. 核心对象 (Core Objects)

我们的世界里只有三种基本元素：

* **画布 (The Canvas)** 🎨: 承载一切的无限空间。用户可以在这个空间里自由导航。
    * **交互:**
        * **平移 (Pan):** 按住鼠标中键或空格键拖拽，或双指在触摸板上滑动。
        * **缩放 (Zoom):** 鼠标滚轮滚动，或双指在触摸板上捏合。

* **节点 (Node)** 📦: 画布上的信息单元，也就是你提到的“方框”。每个节点都是一次交互的载体。
    * **类型:**
        * **用户节点 (User Node):** 用户输入问题的容器。
        * **AI节点 (AI Node):** AI生成回答的容器。
    * **状态:**
        * **输入中 (Editing):** 节点处于可编辑状态，用户可以输入或修改文字。
        * **生成中 (Generating):** 提交问题后，AI节点出现并显示一个加载或思考的动画，表示正在处理。
        * **已完成 (Completed):** AI节点展示完整内容。
        * **焦点 (Focus):** 当前选中或正在交互的节点，会有视觉上的高亮（比如边框发光）。

* **连接线 (Edge)** 🔗: 连接不同节点的视觉引导，代表了对话的流向和逻辑关系。通常是从一个用户节点指向一个AI节点，或从一个AI节点指向一个新的用户节点。

## 3. 核心功能与交互流程 (Core Features & Interaction Flow)

### 3.1. 发起一次全新的对话

1.  **场景:** 用户进入一片空白的画布。
2.  **交互:**
    * 用户在屏幕中央看到一个预设的输入框，或通过双击画布任意位置创建一个新的 **用户节点**。
    * 该节点自动进入 **输入中** 状态，用户键入问题或想法，例如：“LunaPods 销量出了问题，从 7 月 8 日所在周开始，四周均值下滑了 28%，并且连续三周没有回复，帮我找主要原因。”
    * 用户点击节点内的“发送”按钮，或按下 `Enter` 键提交。

### 3.2. AI生成与展示回应

1.  **场景:** 用户提交了一个问题。
2.  **交互:**
    * 原始的 **用户节点** 变为只读状态。
    * 一条 **连接线** 从用户节点延伸出来。
    * 在连接线的末端，一个新的 **AI节点** 被创建，并立即进入 **生成中** 状态。这个过程应该有流畅的动画，让用户感觉AI“正在思考”。
    * AI完成思考后，内容以流式（streaming）的方式出现在 **AI节点** 中，节点状态变为 **已完成**。内容可以是分析、解释或提出澄清问题，例如：“理解指令... 我需要和用户确认这个指标是哪一个。”

### 3.3. 进行分支探索 (The Core Innovation)

这是与传统聊天模式最关键的区别。

1.  **场景:** AI的回应（**AI节点**）中可能包含多个值得深挖的点，用户不想打断主线，但想就其中一点进行追问。
2.  **交互:**
    * 当用户的鼠标悬停在某个 **AI节点** 上时，该节点内部的逻辑段落（例如，每个bullet point或每个自然段）旁边会出现一个可交互的“+”或“分叉”图标。
    * 用户点击某个段落旁边的“分叉”图标。
    * 一条新的 **连接线** 从那个图标的位置延伸出来。
    * 在连接线的末端，一个新的 **用户节点** 被创建，并自动进入 **输入中** 状态，且可能已经预填充了对该段落的引用。
    * 用户在这个新的 **用户节点** 中输入针对性的问题，例如，如果AI提到了“用户行为分析”，用户可以分叉出一个新问题：“具体展开讲讲用户行为分析可以从哪几个维度入手？”
    * 提交后，流程与 `3.2` 相同，形成一个新的对话分支。主线对话和其他分支在画布上同时可见，互不干扰。

### 3.4. 延续主线对话

1.  **场景:** 用户对AI的整个回答感到满意，并希望继续下一步。
2.  **交互:**
    * 在整个 **AI节点** 的末尾，有一个主“继续”或“回复”的输入区域/按钮。
    * 用户点击后，会在该AI节点下方创建一个新的、与之主线连接的 **用户节点**，进入 **输入中** 状态。

## 4. 我们可以进一步思考的设计点

这部分是为我们下一步迭代准备的，也是这个模式的潜力所在。

* **节点的形态:** AI节点是否可以不仅仅是文本？比如，如果AI分析了数据，它能否生成一个可交互的图表节点？如果AI写了代码，能否生成一个可执行的代码节点？
* **节点的组织:** 用户是否可以手动拖动、排列节点，以符合自己的逻辑结构？AI能否在对话变得复杂时，智能地帮助用户整理布局？
* **分支的合并:** 如果两条分支的探索最后得出了相似的结论，用户是否可以将它们“合并”或关联起来？
* **上下文管理:** 当用户在一个很深的分支里提问时，AI应该如何理解上下文？是只理解这个分支的，还是理解整个画布的？这需要明确的规则和清晰的视觉反馈。